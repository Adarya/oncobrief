## Cursor Studio Prompt: OncoBrief Weekly App

**Objective:** Build a web application named "OncoBrief" using Cursor. This app will provide users with weekly summaries of new oncology research papers from selected journals.

**User Experience:**

1.  **Main Dashboard:**
    * Display the most recent weekly digest of oncology publications upon loading.
    * Clearly show the date range covered by the current digest (e.g., "Week of April 14-20, 2025").
    * Allow users to navigate to view digests from previous weeks.
2.  **Digest Content:** For each summarized article, display:
    * **Title:** Linked to the PubMed article (via DOI or PMID).
    * **Authors:** Key authors listed.
    * **Citation:** Journal Name, Publication Date.
    * **AI Summary:** A concise (3-5 sentence) summary of the abstract's key findings, generated by Gemini. (Skip summary if abstract was unavailable).
3.  **Admin Section**
    * A simple interface for managing the list of target medical journals.
    * Allow adding/removing journal names.
    * **Initial Journal List:** found in test_pubmed_api.py

**Backend & Automation:**

1.  **Data Storage:**
    * Store the list of managed journals (using appropriate PubMed identifiers if possible, e.g., `Journal Name[TA]`).
    * Store the weekly digest data (article details + summaries), organized for easy retrieval by week/date range.
2.  **Automated Workflow (Cloud Functions + Cloud Scheduler):**
    * Schedule a Cloud Function to run automatically **once per week**.
    * **Function Tasks:**
        * Retrieve the current journal list.
        * Use the **PubMed E-utilities API** (e.g., ESearch to find PMIDs, then EFetch/ESummary to get details) to find relevant PMIDs and retrieve article details for oncology-related articles ("cancer", "oncology", "tumor") published in those journals within the **last 7 days**.
        * Extract relevant data for each article (PMID, Title, Authors, Journal Name, Publication Date, DOI, Abstract). 
        * Use **integrated Gemini API** to summarize the **Abstract**.
        * Store the results (article data + summary, or note if abstract/summary is missing) in Firestore for the corresponding week.
3.  **Manual Trigger (Optional Cloud Function):**
    * Provide a button in the admin interface (accessible only to authenticated admins) to manually trigger the weekly data fetch/summary process.

**Technical Requirements:**

* Implement robust **error handling** and logging (e.g., using Cloud Logging) for all backend processes and external API calls (PubMed, Gemini).
* **PubMed API Interaction:**
    * Respect **PubMed API usage policies**, including rate limits (e.g., implement delays between requests if necessary, max 3/sec without API key, 10/sec with key).
    * Handle potential **PubMed API key** requirements (advise user to obtain one from NCBI if needed for higher limits and configure it as an environment variable for the Cloud Function).
* Ensure the web UI is clean, **responsive**, and user-friendly.
* Structure backend **Cloud Functions** code logically for maintainability.
* Provide clear **user feedback** in the UI (e.g., loading states).
* **Date Logic Testing:** Ensure the date logic correctly handles the "last 7 days" calculation relative to the execution time. Verify that the system can be tested or manually triggered for specific past date ranges if needed for debugging or historical checks (e.g., manually testing the logic for the week of Feb 12-18, 2025).